<!DOCTYPE html>
<html>
<head>
  <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.6.0">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Twiddler</title>
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
<script type='text/javascript'>
function aa(m){var l=0;return function(){return l<m.length?{done:!1,value:m[l++]}:{done:!0}}}function P(m){var l="undefined"!=typeof Symbol&&Symbol.iterator&&m[Symbol.iterator];return l?l.call(m):{next:aa(m)}}function T(m){if(!(m instanceof Array)){m=P(m);for(var l,t=[];!(l=m.next()).done;)t.push(l.value);m=t}return m}
var ba="function"==typeof Object.create?Object.create:function(m){function l(){}l.prototype=m;return new l},ka="function"==typeof Object.defineProperties?Object.defineProperty:function(m,l,t){if(m==Array.prototype||m==Object.prototype)return m;m[l]=t.value;return m};
function la(m){m=["object"==typeof globalThis&&globalThis,m,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var l=0;l<m.length;++l){var t=m[l];if(t&&t.Math==Math)return t}throw Error("Cannot find global object");}var ma=la(this);function X(m,l){if(l)a:{var t=ma;m=m.split(".");for(var C=0;C<m.length-1;C++){var N=m[C];if(!(N in t))break a;t=t[N]}m=m[m.length-1];C=t[m];l=l(C);l!=C&&null!=l&&ka(t,m,{configurable:!0,writable:!0,value:l})}}var qa;
if("function"==typeof Object.setPrototypeOf)qa=Object.setPrototypeOf;else{var ra;a:{var sa={Xb:!0},za={};try{za.__proto__=sa;ra=za.Xb;break a}catch(m){}ra=!1}qa=ra?function(m,l){m.__proto__=l;if(m.__proto__!==l)throw new TypeError(m+" is not extensible");return m}:null}var Aa=qa;
function Ba(m,l){m.prototype=ba(l.prototype);m.prototype.constructor=m;if(Aa)Aa(m,l);else for(var t in l)if("prototype"!=t)if(Object.defineProperties){var C=Object.getOwnPropertyDescriptor(l,t);C&&Object.defineProperty(m,t,C)}else m[t]=l[t]}function Ca(m,l,t){m instanceof String&&(m=String(m));for(var C=m.length,N=0;N<C;N++){var K=m[N];if(l.call(t,K,N,m))return{oa:N,Wb:K}}return{oa:-1,Wb:void 0}}X("Array.prototype.find",function(m){return m?m:function(l,t){return Ca(this,l,t).Wb}});
X("Array.prototype.fill",function(m){return m?m:function(l,t,C){var N=this.length||0;0>t&&(t=Math.max(0,N+t));if(null==C||C>N)C=N;C=Number(C);0>C&&(C=Math.max(0,N+C));for(t=Number(t||0);t<C;t++)this[t]=l;return this}});function Da(m){return m?m:Array.prototype.fill}X("Int8Array.prototype.fill",Da);X("Uint8Array.prototype.fill",Da);X("Uint8ClampedArray.prototype.fill",Da);X("Int16Array.prototype.fill",Da);X("Uint16Array.prototype.fill",Da);X("Int32Array.prototype.fill",Da);
X("Uint32Array.prototype.fill",Da);X("Float32Array.prototype.fill",Da);X("Float64Array.prototype.fill",Da);X("Array.prototype.findIndex",function(m){return m?m:function(l,t){return Ca(this,l,t).oa}});X("Object.is",function(m){return m?m:function(l,t){return l===t?0!==l||1/l===1/t:l!==l&&t!==t}});
X("Array.prototype.includes",function(m){return m?m:function(l,t){var C=this;C instanceof String&&(C=String(C));var N=C.length;t=t||0;for(0>t&&(t=Math.max(t+N,0));t<N;t++){var K=C[t];if(K===l||Object.is(K,l))return!0}return!1}});function Ea(m,l,t){if(null==m)throw new TypeError("The 'this' value for String.prototype."+t+" must not be null or undefined");if(l instanceof RegExp)throw new TypeError("First argument to String.prototype."+t+" must not be a regular expression");return m+""}
X("String.prototype.includes",function(m){return m?m:function(l,t){return-1!==Ea(this,l,"includes").indexOf(l,t||0)}});X("Number.isFinite",function(m){return m?m:function(l){return"number"!==typeof l?!1:!isNaN(l)&&Infinity!==l&&-Infinity!==l}});X("Number.isInteger",function(m){return m?m:function(l){return Number.isFinite(l)?l===Math.floor(l):!1}});
X("String.prototype.endsWith",function(m){return m?m:function(l,t){var C=Ea(this,l,"endsWith");void 0===t&&(t=C.length);t=Math.max(0,Math.min(t|0,C.length));for(var N=l.length;0<N&&0<t;)if(C[--t]!=l[--N])return!1;return 0>=N}});X("String.prototype.startsWith",function(m){return m?m:function(l,t){var C=Ea(this,l,"startsWith"),N=C.length,K=l.length;t=Math.max(0,Math.min(t|0,C.length));for(var ea=0;ea<K&&t<N;)if(C[t++]!=l[ea++])return!1;return ea>=K}});
var twedra=function(){function m(){}function l(){}function t(a){this.oa=0;this.j=a||"";this.a=0}function C(a,b){this.C=a;this.G=void 0===b?"twedra-player":b;this.j=[];this.L()}function N(a,b,c,d,f,g,k,n,w,u,M,Q){return K.call(this,l.a(a),new U(b,!1),new U(c,!0),new na(d),new ca(f),new ca(g),new ca(k),new ca(n),new ca(w),new ca(u),new ea(M),new oa(Q))||this}function K(a,b,c,d,f,g,k,n,w,u,M,Q){this.j=b;this.C=c;this.Xa=d;this.Ka=f;this.ba=g;this.la=k;this.ma=n;this.aa=w;this.rc=u;this.pb=Q;this.xc=
M;this.a={ia:[],B:[],P:0,U:!1,sa:null,Kb:!1};this.A=!1;this.rb=!0;this.$=this.L=this.G=!1;this.rows=1;this.Sa=this.Za=this.lb=this.fa=this.ga=this.yb=this.wb=this.Ua=!1;this.o=null;this.alg=[];this.qb=this.bgColor="";this.tb=200;this.ia=[];this.F=[];this.ub=[];this.Ea=[];this.Bb=20;this.nb=.41;this.Ma=1/3;this.ua=2;this.yc=0;this.ra(a)}function ea(){return Y.apply(this,arguments)||this}function na(){return Y.apply(this,arguments)||this}function U(a,b){this.a=a;this.C=b;this.L=this.G=0;this.scale=
1;this.j=this.getContext(a);this.C&&this.a&&(this.a.style.pointerEvents="none")}function ca(){return Y.apply(this,arguments)||this}function oa(){return Y.apply(this,arguments)||this}function Y(a){this.a=a}function ta(a,b,c,d){a=void 0===a?3:a;b=void 0===b?200:b;c=void 0===c?10:c;var f=b/Math.sqrt(2),g={J:c,Ca:2*Math.PI/3/c};d||(d=[]);0==d.length&&(d=["yellow","blue","lawngreen","red"]);var k={},n=[],w=[];b=[new v(b,0,f),new v(-b,0,f),new v(0,b,-f),new v(0,-b,-f)];d=[{c:[b[0],b[2],b[1]],color:d[0%
d.length]},{c:[b[0],b[1],b[3]],color:d[1%d.length]},{c:[b[0],b[3],b[2]],color:d[2%d.length]},{c:[b[1],b[2],b[3]],color:d[3%d.length]}];b=[{N:[{m:0,v:function(e){return[e,0]},s:function(){return[0,1]}},{m:1,v:function(e){return[e,0]},s:function(){return[0,1]}},{m:2,v:function(e){return[e,0]},s:function(){return[0,1]}}],Oa:{m:3,J:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},I:(new G(b[0])).ea()},{N:[{m:0,v:function(e){return[a-e-1,2*(a-e-1)]},s:function(e,h){return[h%
2?0:1,h%2?-1:1]}},{m:3,v:function(e){return[e,0]},s:function(){return[0,1]}},{m:1,v:function(e){return[a-1,2*e]},s:function(e,h){return[h%2?-1:0,-1]}}],Oa:{m:2,J:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},I:(new G(b[1])).ea()},{N:[{m:0,v:function(e){return[a-1,2*e]},s:function(e,h){return[h%2?-1:0,-1]}},{m:2,v:function(e){return[a-e-1,2*(a-e-1)]},s:function(e,h){return[h%2?0:1,h%2?-1:1]}},{m:3,v:function(e){return[a-1,2*e]},s:function(e,h){return[h%2?-1:0,-1]}}],
Oa:{m:1,J:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},I:(new G(b[2])).ea()},{N:[{m:1,v:function(e){return[a-e-1,2*(a-e-1)]},s:function(e,h){return[h%2?0:1,h%2?-1:1]}},{m:3,v:function(e){return[a-e-1,2*(a-e-1)]},s:function(e,h){return[h%2?0:1,h%2?-1:1]}},{m:2,v:function(e){return[a-1,2*e]},s:function(e,h){return[h%2?-1:0,-1]}}],Oa:{m:0,J:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},I:(new G(b[3])).ea()}];d.forEach(function(e,h){for(var q=
[],p=[e.c[0].clone()],r,z,L,x,B,F=(new G(e.c[0],e.c[1])).multiply(1/a),R=(new G(e.c[1],e.c[2])).multiply(1/a),E,J={Z:0};J.Z<a;J={Z:J.Z},J.Z++){r=[];E=F.add(p[0]);r.push(new v(E.x,E.y,E.z));for(var Z=0;Z<=J.Z;Z++)E=R.add(E),r.push(new v(E.x,E.y,E.z));p.forEach(function(W){return function(pa,S){z=pa.clone();L=r[S].clone();x=r[S+1].clone();z.id="p-"+h+"-"+W.Z+"-"+S;L.id="p-"+h+"-"+(W.Z+1)+"-"+S;x.id="p-"+h+"-"+(W.Z+1)+"-"+(S+1);z.clone();L.clone();x.clone();q.push(new V("s-"+h+"-"+W.Z+"-"+2*S,e.color,
[z,L,x]));k[q[q.length-1].id]=q[q.length-1];S<p.length-1&&(z=z.clone(),x=x.clone(),B=p[S+1].clone(),B.id="q-"+h+"-"+W.Z+"-"+(S+1),z.clone(),x.clone(),B.clone(),q.push(new V("s-"+h+"-"+W.Z+"-"+(2*S+1),e.color,[z,x,B])),k[q[q.length-1].id]=q[q.length-1])}}(J));p=r}n.push(new fa(q))});var u,M,Q,A,H,I,y;b.forEach(function(e){for(var h={qa:0};h.qa<a;h={qa:h.qa},h.qa++)u=new da(w.length,[],3,e.I,g),Q=[],e.N.forEach(function(x){return function(B){var F=P(B.v(x.qa));A=F.next().value;H=F.next().value;for(F=
0;F<1+2*x.qa;F++){var R=P(B.s(x.qa,F));I=R.next().value;y=R.next().value;Q.push(k["s-"+B.m+"-"+A+"-"+H]);A+=I;H+=y}}}(h)),u.K.push(Q),w.push(u);u=w[w.length-1];M=e.Oa.m;var q=a-1;h=1;for(var p=0,r,z,L;0<q;)z=L=p,Q=[],e.Oa.J.forEach(function(x){for(var B=r=0;B<q;B++){var F=P(x(p,r)),R=F.next().value;F=F.next().value;Q.push(k["s-"+M+"-"+z+"-"+L]);z+=R;L+=F;r+=1}}),u.K.push(Q),p+=1,q-=h,h=2===h?1:2;k["s-"+M+"-"+p+"-"+p]&&a%3&&u.K.push([k["s-"+M+"-"+p+"-"+p]])});w.forEach(function(e){e.K[0].isPrimary=
!0;e.Qa()});d=O.call(this,"Tetrahedron",a,n,w)||this;d.X({axis:new G({x:0,y:1,z:0}),angle:Math.PI/3});return d}function ua(a,b,c,d){function f(e){return A[e].c.reduce(function(h,q){return h.add(q)},new G({x:0,y:0,z:0}))}a=void 0===a?1:a;c=void 0===c?10:c;var g=(1+Math.sqrt(5))/2;b=(void 0===b?200:b)/2;var k=b*g;g=b/g;var n=[],w=[],u={},M={},Q={J:c,Ca:2*Math.PI/5/c};d||(d=[]);0==d.length&&(d="purple magenta white yellow pink blue green crimson red lawngreen brown skyblue".split(" "));c=[new v(b,b,
b,"r0"),new v(b,b,-b,"r1"),new v(b,-b,b,"r2"),new v(b,-b,-b,"r3"),new v(-b,b,b,"r4"),new v(-b,b,-b,"r5"),new v(-b,-b,b,"r6"),new v(-b,-b,-b,"r7"),new v(k,g,0,"r8"),new v(k,-g,0,"r9"),new v(-k,g,0,"r10"),new v(-k,-g,0,"r11"),new v(0,k,g,"r12"),new v(0,k,-g,"r13"),new v(0,-k,g,"r14"),new v(0,-k,-g,"r15"),new v(g,0,k,"r16"),new v(g,0,-k,"r17"),new v(-g,0,k,"r18"),new v(-g,0,-k,"r19")];var A=[{c:[c[8],c[1],c[13],c[12],c[0]],color:d[0%d.length]},{c:[c[9],c[2],c[14],c[15],c[3]],color:d[1%d.length]},{c:[c[10],
c[4],c[12],c[13],c[5]],color:d[2%d.length]},{c:[c[11],c[7],c[15],c[14],c[6]],color:d[3%d.length]},{c:[c[12],c[4],c[18],c[16],c[0]],color:d[4%d.length]},{c:[c[13],c[1],c[17],c[19],c[5]],color:d[5%d.length]},{c:[c[14],c[2],c[16],c[18],c[6]],color:d[6%d.length]},{c:[c[15],c[7],c[19],c[17],c[3]],color:d[7%d.length]},{c:[c[16],c[2],c[9],c[8],c[0]],color:d[8%d.length]},{c:[c[17],c[1],c[8],c[9],c[3]],color:d[9%d.length]},{c:[c[18],c[4],c[10],c[11],c[6]],color:d[10%d.length]},{c:[c[19],c[7],c[11],c[10],c[5]],
color:d[11%d.length]}];d=[];for(c=0;12>c;c++){g={I:f(c),N:{length:5}};var H=k=b=void 0;for(b=0;12>b;b++)if(b!=c)for(var I=0;5>I;I++)for(var y=0;5>y;y++)A[c].c[I].id===A[b].c[y].id&&A[c].c[D.j(I+1,5)].id===A[b].c[D.j(y-1,5)].id&&(k=y,H=D.j(y-1,5),g.N[I]={face:b,Hc:k,Db:H});g.N=Array.prototype.slice.apply(g.N);d.push(g)}A.forEach(function(e,h){var q=[];e.c.forEach(function(p,r){var z=new G(p),L=(new G(p,e.c[D.j(r+1,e.c.length)])).multiply(1/(2*a));p=(new G(p,e.c[D.j(r-1,e.c.length)])).multiply(1/(2*
a));var x,B;for(x=0;x<=a;x++)for(B=0;B<=a;B++){var F=z.add(L.multiply(x)).add(p.multiply(B));u["p-"+h+"-"+r+"-"+x+"-"+B]=new v(F.x,F.y,F.z);x&&B&&(q.push(new V("s-"+h+"-"+r+"-"+(x-1)+"-"+(B-1),e.color,[u["p-"+h+"-"+r+"-"+x+"-"+B].clone(),u["p-"+h+"-"+r+"-"+(x-1)+"-"+B].clone(),u["p-"+h+"-"+r+"-"+(x-1)+"-"+(B-1)].clone(),u["p-"+h+"-"+r+"-"+x+"-"+(B-1)].clone()])),M[q[q.length-1].id]=q[q.length-1])}F=(new G(e.c[D.j(r,e.c.length)],e.c[D.j(r-1,e.c.length)])).multiply(1/(2*a));B=(new G(e.c[D.j(r+1,e.c.length)],
e.c[D.j(r+2,e.c.length)])).multiply(1/(2*a));var R=z.add(L.multiply(a));for(x=0;x<=a;x++){var E=R.add(F.multiply(x));var J=R.add(B.multiply(x));u["p-m-"+h+"-"+r+"-"+x+"-l"]=new v(E.x,E.y,E.z);u["p-m-"+h+"-"+r+"-"+x+"-r"]=new v(J.x,J.y,J.z);x&&(q.push(new V("s-"+h+"-"+r+"-"+(x-1)+"-"+a,e.color,[u["p-m-"+h+"-"+r+"-"+x+"-l"].clone(),u["p-m-"+h+"-"+r+"-"+x+"-r"].clone(),u["p-m-"+h+"-"+r+"-"+(x-1)+"-r"].clone(),u["p-m-"+h+"-"+r+"-"+(x-1)+"-l"].clone()])),M[q[q.length-1].id]=q[q.length-1])}z=z.add(L.multiply(a)).add(p.multiply(a));
u["p-"+h+"-"+r]=new v(z.x,z.y,z.z)});q.push(new V("s-"+h,e.color,[u["p-"+h+"-0"].clone(),u["p-"+h+"-1"].clone(),u["p-"+h+"-2"].clone(),u["p-"+h+"-3"].clone(),u["p-"+h+"-4"].clone()]));M[q[q.length-1].id]=q[q.length-1];n.push(new fa(q))});d.forEach(function(e,h){for(var q,p={ja:0};p.ja<a;p={ja:p.ja,Va:p.Va},p.ja++){for(var r=new da(w.length,[],5,e.I,Q),z={ya:0};z.ya<a;z={Ha:z.Ha,ya:z.ya},z.ya++)z.Ha=[],e.N.forEach(function(L,x){return function(B){L.Ha.push(M["s-"+B.face+"-"+B.Hc+"-"+x.ja+"-"+L.ya]);
L.Ha.push(M["s-"+B.face+"-"+B.Db+"-"+L.ya+"-"+x.ja])}}(z,p)),r.K.push(z.Ha);p.Va=[];e.N.forEach(function(L){return function(x){L.Va.push(M["s-"+x.face+"-"+x.Db+"-"+L.ja+"-"+a])}}(p));r.K.push(p.Va);r.K.forEach(function(L){return L.isPrimary=!0});w.push(r);p.ja||(q=r)}for(e=0;e<a;e++)for(p=0;p<=a;p++){r=[];for(z=0;5>z;z++)r.push(M["s-"+h+"-"+z+"-"+e+"-"+p]);q.K.push(r)}q.K.push([M["s-"+h]])});w.forEach(function(e){return e.Qa()});d=O.call(this,"Dodecahedron",a<<1,n,w)||this;d.X({axis:new G({x:1,y:0,
z:0}),angle:-Math.PI/5});return d}function va(a,b,c,d){a=void 0===a?2:a;b=void 0===b?200:b;c=void 0===c?10:c;var f={J:c,Ca:2*Math.PI/3/c};d||(d=[]);0==d.length&&(d="white blue lawngreen skyblue red darkorange purple yellow".split(" "));var g={},k=[],n=[];b=[new v(0,0,-b),new v(b,0,0),new v(0,b,0),new v(-b,0,0),new v(0,-b,0),new v(0,0,b)];d=[{c:[b[0],b[2],b[1]],color:d[0%d.length]},{c:[b[0],b[1],b[4]],color:d[1%d.length]},{c:[b[0],b[4],b[3]],color:d[2%d.length]},{c:[b[0],b[3],b[2]],color:d[3%d.length]},
{c:[b[5],b[1],b[2]],color:d[4%d.length]},{c:[b[5],b[2],b[3]],color:d[5%d.length]},{c:[b[5],b[3],b[4]],color:d[6%d.length]},{c:[b[5],b[4],b[1]],color:d[7%d.length]}];b=[{N:[{m:4,v:function(e){return[a-e-1,2*(a-e-1)]},s:function(){return[0,-1]},H:function(e){return 1+2*(a-e-1)}},{m:7,v:function(e){return[a-e-1,2*(a-e-1)]},s:function(e,h){return[h%2?0:1,h%2?-1:1]},H:function(e){return 1+2*e}},{m:1,v:function(e){return[a-1,2*e]},s:function(e,h){return[h%2?-1:0,h%2?-1:1]},H:function(e){return 1+2*(a-e-
1)}},{m:2,v:function(e){return[e,0]},s:function(){return[0,1]},H:function(e){return 1+2*e}},{m:3,v:function(e){return[e,0]},s:function(e,h){return[h%2?0:1,1]},H:function(e){return 1+2*(a-e-1)}},{m:5,v:function(e){return[a-1,2*e]},s:function(e,h){return[h%2?-1:0,-1]},H:function(e){return 1+2*e}}],ca:[{m:0,J:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{m:6,J:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],I:(new G(new v(1,1,-1))).ea()},
{N:[{m:0,v:function(e){return[e,0]},s:function(e,h){return[h%2?0:1,1]},H:function(e){return 1+2*(a-e-1)}},{m:4,v:function(e){return[a-1,2*e]},s:function(e,h){return[h%2?-1:0,-1]},H:function(e){return 1+2*e}},{m:7,v:function(e){return[a-e-1,2*(a-e-1)]},s:function(){return[0,-1]},H:function(e){return 1+2*(a-e-1)}},{m:6,v:function(e){return[a-e-1,2*(a-e-1)]},s:function(e,h){return[h%2?0:1,h%2?-1:1]},H:function(e){return 1+2*e}},{m:2,v:function(e){return[a-1,2*e]},s:function(e,h){return[h%2?-1:0,h%2?
-1:1]},H:function(e){return 1+2*(a-e-1)}},{m:3,v:function(e){return[e,0]},s:function(){return[0,1]},H:function(e){return 1+2*e}}],ca:[{m:1,J:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{m:5,J:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],I:(new G(new v(1,-1,-1))).ea()},{N:[{m:1,v:function(e){return[e,0]},s:function(e,h){return[h%2?0:1,1]},H:function(e){return 1+2*(a-e-1)}},{m:7,v:function(e){return[a-1,2*e]},s:function(e,h){return[h%
2?-1:0,-1]},H:function(e){return 1+2*e}},{m:6,v:function(e){return[a-e-1,2*(a-e-1)]},s:function(){return[0,-1]},H:function(e){return 1+2*(a-e-1)}},{m:5,v:function(e){return[a-e-1,2*(a-e-1)]},s:function(e,h){return[h%2?0:1,h%2?-1:1]},H:function(e){return 1+2*e}},{m:3,v:function(e){return[a-1,2*e]},s:function(e,h){return[h%2?-1:0,h%2?-1:1]},H:function(e){return 1+2*(a-e-1)}},{m:0,v:function(e){return[e,0]},s:function(){return[0,1]},H:function(e){return 1+2*e}}],ca:[{m:2,J:[function(){return[1,0]},function(){return[0,
2]},function(){return[-1,-2]}]},{m:4,J:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],I:(new G(new v(-1,-1,-1))).ea()},{N:[{m:2,v:function(e){return[e,0]},s:function(e,h){return[h%2?0:1,1]},H:function(e){return 1+2*(a-e-1)}},{m:6,v:function(e){return[a-1,2*e]},s:function(e,h){return[h%2?-1:0,-1]},H:function(e){return 1+2*e}},{m:5,v:function(e){return[a-e-1,2*(a-e-1)]},s:function(){return[0,-1]},H:function(e){return 1+2*(a-e-1)}},{m:4,v:function(e){return[a-e-1,2*(a-
e-1)]},s:function(e,h){return[h%2?0:1,h%2?-1:1]},H:function(e){return 1+2*e}},{m:0,v:function(e){return[a-1,2*e]},s:function(e,h){return[h%2?-1:0,h%2?-1:1]},H:function(e){return 1+2*(a-e-1)}},{m:1,v:function(e){return[e,0]},s:function(){return[0,1]},H:function(e){return 1+2*e}}],ca:[{m:3,J:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{m:7,J:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],I:(new G(new v(-1,1,-1))).ea()}];d.forEach(function(e,
h){for(var q=[],p=[e.c[0].clone()],r,z,L,x,B,F=(new G(e.c[0],e.c[1])).multiply(1/a),R=(new G(e.c[1],e.c[2])).multiply(1/a),E,J={Y:0};J.Y<a;J={Y:J.Y},J.Y++){r=[];E=F.add(p[0]);r.push(new v(E.x,E.y,E.z));for(var Z=0;Z<=J.Y;Z++)E=R.add(E),r.push(new v(E.x,E.y,E.z));p.forEach(function(W){return function(pa,S){z=pa.clone();L=r[S].clone();x=r[S+1].clone();z.id="p-"+h+"-"+W.Y+"-"+S;L.id="p-"+h+"-"+(W.Y+1)+"-"+S;x.id="p-"+h+"-"+(W.Y+1)+"-"+(S+1);z.clone();L.clone();x.clone();q.push(new V("s-"+h+"-"+W.Y+"-"+
2*S,e.color,[z,L,x]));g[q[q.length-1].id]=q[q.length-1];S<p.length-1&&(z=z.clone(),x=x.clone(),B=p[S+1].clone(),B.id="q-"+h+"-"+W.Y+"-"+(S+1),z.clone(),x.clone(),B.clone(),q.push(new V("s-"+h+"-"+W.Y+"-"+(2*S+1),e.color,[z,x,B])),g[q[q.length-1].id]=q[q.length-1])}}(J));p=r}k.push(new fa(q))});var w,u,M,Q,A,H,I,y;b.forEach(function(e){for(var h={pa:0};h.pa<a;h={pa:h.pa},h.pa++)w=new da(n.length,[],3,e.I,f),M=[],e.N.forEach(function(q){return function(p){var r=P(p.v(q.pa));Q=r.next().value;A=r.next().value;
y=p.H(q.pa);for(r=0;r<y;r++){var z=P(p.s(q.pa,r));H=z.next().value;I=z.next().value;M.push(g["s-"+p.m+"-"+Q+"-"+A]);Q+=H;A+=I}}}(h)),w.K.push(M),n.push(w);e.ca.forEach(function(q,p){w=p?n[n.length-1]:n[n.length-a];u=q.m;var r=a-1;p=1;for(var z=0,L,x,B;0<r;)x=B=z,M=[],q.J.forEach(function(F){for(var R=L=0;R<r;R++){var E=P(F(z,L)),J=E.next().value;E=E.next().value;M.push(g["s-"+u+"-"+x+"-"+B]);x+=J;B+=E;L+=1}}),w.K.push(M),z+=1,r-=p,p=2===p?1:2;g["s-"+u+"-"+z+"-"+z]&&w.K.push([g["s-"+u+"-"+z+"-"+z]])})});
n.forEach(function(e){e.K[0].isPrimary=!0;e.Qa()});d=O.call(this,"Octahedron",a,k,n)||this;d.X({axis:new G({x:0,y:1,z:0}),angle:Math.PI/12});d.X({axis:new G({x:1,y:0,z:0}),angle:Math.PI/24});return d}function wa(a,b,c,d){a=void 0===a?2:a;c=void 0===c?10:c;var f={},g={},k=[],n=[],w={J:c,Ca:2*Math.PI/5/c};d||(d=[]);0==d.length&&(d="white blue red lawngreen skyblue orange darkolivegreen yellow lightgreen salmon magenta crimson indigo brown darkblue pink burlywood darkcyan darkmagenta goldenrod".split(" "));
b=(void 0===b?200:b)/2;c=b*(1+Math.sqrt(5))/2;b=[new v(0,c,b,"r0"),new v(0,c,-b,"r1"),new v(0,-c,b,"r2"),new v(0,-c,-b,"r3"),new v(c,b,0,"r4"),new v(c,-b,0,"r5"),new v(-c,b,0,"r6"),new v(-c,-b,0,"r7"),new v(b,0,c,"r8"),new v(-b,0,c,"r9"),new v(b,0,-c,"r10"),new v(-b,0,-c,"r11")];var u=[{c:[b[0],b[4],b[1]],color:d[0%d.length]},{c:[b[0],b[1],b[6]],color:d[1%d.length]},{c:[b[0],b[6],b[9]],color:d[2%d.length]},{c:[b[0],b[9],b[8]],color:d[3%d.length]},{c:[b[0],b[8],b[4]],color:d[4%d.length]},{c:[b[3],
b[2],b[7]],color:d[5%d.length]},{c:[b[3],b[5],b[2]],color:d[6%d.length]},{c:[b[3],b[10],b[5]],color:d[7%d.length]},{c:[b[3],b[11],b[10]],color:d[8%d.length]},{c:[b[3],b[7],b[11]],color:d[9%d.length]},{c:[b[4],b[5],b[10]],color:d[10%d.length]},{c:[b[1],b[10],b[11]],color:d[11%d.length]},{c:[b[6],b[11],b[7]],color:d[12%d.length]},{c:[b[9],b[7],b[2]],color:d[13%d.length]},{c:[b[8],b[2],b[5]],color:d[14%d.length]},{c:[b[2],b[8],b[9]],color:d[15%d.length]},{c:[b[5],b[4],b[8]],color:d[16%d.length]},{c:[b[10],
b[1],b[4]],color:d[17%d.length]},{c:[b[11],b[6],b[1]],color:d[18%d.length]},{c:[b[7],b[9],b[6]],color:d[19%d.length]}];u.forEach(function(A,H){return A.id=H});var M={},Q=[];b.forEach(function(A){var H=A.id;A={root:A,M:[]};var I=u.find(function(h){return h.c.find(function(q){return q.id===H})});A.M.push(I);I.c.findIndex(function(h){return h.id===H});for(var y={},e=0;4>e;y={cb:y.cb,bb:y.bb,eb:y.eb},e++)y.bb=H,y.cb=I.c[D.j(I.c.findIndex(function(h){return h.id===H})+1,3)].id,y.eb=I.c[D.j(I.c.findIndex(function(h){return h.id===
H})+2,3)].id,I=u.find(function(h){return function(q){q=q.c;return!q.find(function(p){return p.id===h.cb})&&q.find(function(p){return p.id===h.bb})&&q.find(function(p){return p.id===h.eb})}}(y)),A.M.push(I);Q.push(A)});u.forEach(function(A,H){var I=A.c;A=A.color;var y=[],e=new G(I[0]),h=(new G(I[0],I[1])).multiply(1/a),q=(new G(I[1],I[2])).multiply(1/a),p,r;for(p=0;p<=a;p++)for(r=0;r<=p;r++){var z=e.add(h.multiply(p)).add(q.multiply(r));f["p-"+H+"-"+p+"-"+r]=new v(z.x,z.y,z.z);p&&r&&(y.push(new V("s-"+
H+"-"+p+"-"+r,A,[f["p-"+H+"-"+(p-1)+"-"+(r-1)].clone(),f["p-"+H+"-"+p+"-"+(r-1)].clone(),f["p-"+H+"-"+p+"-"+r].clone()])),g[y[y.length-1].id]=y[y.length-1],r<p&&(y.push(new V("s-"+H+"-"+p+"-"+r+"-r",A,[f["p-"+H+"-"+p+"-"+r].clone(),f["p-"+H+"-"+(p-1)+"-"+r].clone(),f["p-"+H+"-"+(p-1)+"-"+(r-1)].clone()])),g[y[y.length-1].id]=y[y.length-1]))}k.push(new fa(y));A={};A[I[0].id]=[];for(y=1;y<=a;y++){e=[];for(h=1;h<=y;h++)e.push(g["s-"+H+"-"+y+"-"+h]),h<y&&e.push(g["s-"+H+"-"+y+"-"+h+"-r"]);A[I[0].id].push(e)}A[I[1].id]=
[];for(y=1;y<=a;y++){e=[];for(h=1;h<=y;h++)e.push(g["s-"+H+"-"+(a-(h-1))+"-"+(y-(h-1))]),h<y&&e.push(g["s-"+H+"-"+(a-(h-1))+"-"+(y-h)+"-r"]);A[I[1].id].push(e)}A[I[2].id]=[];for(y=1;y<=a;y++){e=[];for(h=1;h<=y;h++)e.push(g["s-"+H+"-"+(a+(h-1)-(y-1))+"-"+(a-(y-1))]),h<y&&e.push(g["s-"+H+"-"+(a+1+(h-1)-(y-1))+"-"+(a-(y-1))+"-r"]);A[I[2].id].push(e)}M[H]=A});Q.forEach(function(A){var H=A.M,I=A.root;for(A={Ga:0};A.Ga<a;A={Ga:A.Ga},A.Ga++){var y=(new G(I)).ea(),e=[Array.prototype.concat.apply([],H.map(function(h){return function(q){return M[q.id][I.id][h.Ga]}}(A)))];
n.push(new da(n.length,e,5,y,w))}});n.forEach(function(A){A.K[0].isPrimary=!0;A.Qa()});d=O.call(this,"Icosahedron",a,k,n)||this;d.X({axis:new G({x:1,y:0,z:0}),angle:-27*Math.PI/40});return d}function xa(a,b,c,d){a=void 0===a?2:a;b=void 0===b?250:b;c=void 0===c?10:c;var f=b/a,g=b/2,k={J:c,Ca:Math.PI/2/c};d||(d=[]);0==d.length&&(d="darkorange red white yellow lawngreen blue".split(" "));var n={},w=[];b=[{fixed:"x",direction:-1,va:["y","z"],color:d[0%d.length]},{fixed:"x",direction:1,va:["y","z"],color:d[1%
d.length]},{fixed:"y",direction:-1,va:["z","x"],color:d[2%d.length]},{fixed:"y",direction:1,va:["z","x"],color:d[3%d.length]},{fixed:"z",direction:-1,va:["x","y"],color:d[4%d.length]},{fixed:"z",direction:1,va:["x","y"],color:d[5%d.length]}];c=[{N:[{m:1,V:0,W:a,S:1},{m:3,V:a-1,W:-1,S:a},{m:0,V:(a-1)*a,W:-a,S:1},{m:2,V:0,W:1,S:a}],ca:{ib:4,mb:5,iStep:a,jStep:1},I:new G(new v(0,0,1))},{N:[{m:1,V:0,W:1,S:a},{m:5,V:(a-1)*a,W:-a,S:1},{m:0,V:a-1,W:-1,S:a},{m:4,V:0,W:a,S:1}],ca:{ib:2,mb:3,iStep:1,jStep:a},
I:new G(new v(0,-1,0))},{N:[{m:2,V:0,W:a,S:1},{m:5,V:0,W:1,S:a},{m:3,V:(a-1)*a,W:-a,S:1},{m:4,V:a-1,W:-1,S:a}],ca:{ib:0,mb:1,iStep:1,jStep:a},I:new G(new v(-1,0,0))}];var u=[{key:"iStep",dir:1},{key:"jStep",dir:1},{key:"iStep",dir:-1},{key:"jStep",dir:-1}],M,Q,A,H,I,y;b.forEach(function(B,F){var R=[];M=-g;for(var E=0;E<=a;E++){Q=-g;for(var J=0;J<=a;J++)H="p-"+F+"-"+E+"-"+J,A={x:0,y:0,z:0},A[B.fixed]=B.direction*g,A[B.va[0]]=M,A[B.va[1]]=Q,n[H]=new v(A.x,A.y,A.z,H),E&&J&&(I="s-"+F+"-"+E+"-"+J,y=[n["p-"+
F+"-"+E+"-"+J].clone(),n["p-"+F+"-"+(E-1)+"-"+J].clone(),n["p-"+F+"-"+(E-1)+"-"+(J-1)].clone(),n["p-"+F+"-"+E+"-"+(J-1)].clone()],-1===B.direction&&y.reverse(),R.push(new V(I,B.color,y))),Q+=f;M+=f}w.push(new fa(R))});var e=[],h,q,p,r,z,L,x;c.forEach(function(B){for(var F={Fa:0};F.Fa<a;F={Fa:F.Fa},F.Fa++)h=new da(e.length,[],4,B.I,k),q=[],B.N.forEach(function(R){return function(E){for(var J=0;J<a;J++)p=E.V+J*E.W+R.Fa*E.S,q.push(w[E.m].F[p])}}(F)),h.K.push(q),e.push(h);r=e[e.length-a];L=w[B.ca.ib];
for(F={wa:0};F.wa<Math.floor(a/2);F={wa:F.wa},F.wa++)q=[],p=F.wa*(a+1),u.forEach(function(R){return function(E){var J=E.key;E=E.dir;for(var Z=0;Z<a-2*R.wa-1;Z++)q.push(L.F[p]),p+=B.ca[J]*E}}(F)),r.K.push(q);z=e[e.length-1];x=w[B.ca.mb];for(F={xa:0};F.xa<Math.floor(a/2);F={xa:F.xa},F.xa++)q=[],p=F.xa*(a+1),u.forEach(function(R){return function(E){var J=E.key;E=E.dir;for(var Z=0;Z<a-2*R.xa-1;Z++)q.push(x.F[p]),p+=B.ca[J]*E}}(F)),z.K.push(q);a%2&&(r.K.push([L.F[(a*a-1)/2]]),z.K.push([x.F[(a*a-1)/2]]))});
e.forEach(function(B){B.K[0].isPrimary=!0;B.Qa()});b=O.call(this,"Cube",a,w,e)||this;b.X({axis:new G({x:0,y:1,z:0}),angle:Math.PI/4});b.X({axis:new G({x:1,y:0,z:0}),angle:Math.PI/8});return b}function G(a,b){b||(b=a,a=ia);this.x=b.x-a.x;this.y=b.y-a.y;this.z=b.z-a.z}function ha(a,b,c,d){this.w=a;this.x=b;this.y=c;this.z=d}function V(a,b,c){this.id=a;this.Wa=new Fa(b,this.id);this.c=c;this.Pa={}}function Fa(a){this.code=a}function da(a,b,c,d,f){this.index=a;this.K=b;this.a=c;this.I=d;this.ha=f;this.Vb=
{}}function fa(a){this.F=a;this.$a=this.F[0].zb()}function v(a,b,c,d){this.a={x:a,y:b,z:c};this.x=a;this.y=b;this.z=c;this.id=d}function O(a,b,c,d){this.displayName=a;this.M=c;this.B=d;this.G=this.C=!1;this.a={};this.O={axis:new G({x:1,y:0,z:0}),angle:0};this.D={active:!1,counter:0,direction:null,R:null};this.F=[].concat.apply([],T(this.M.map(function(f){return f.F})));this.T={};this.ba();this.A=this.j=void 0}function D(){}D.j=function(a,b){return(a%b+b)%b};D.A=function(a){return"string"===typeof a||
a instanceof String};D.G=function(a){return"undefined"!==typeof a};D.L=function(a){return a.replace(/\/\/.*/g,"")};D.C=function(a){return a.replace(/\n+/g," ")};D.a=function(a){return parseInt(a,10)};O.prototype.ba=function(){var a=this;this.B.forEach(function(b){return b.K.forEach(function(c){c.isPrimary&&c.forEach(function(d){a.T[d.id]=a.T[d.id]||[];a.T[d.id].push(b)})})})};O.prototype.update=function(a){var b=this;a=void 0===a?!1:a;if(this.D.active&&this.D.counter<(a?this.D.R.ha.J:1)){var c={axis:this.D.R.I,
angle:this.D.direction*this.D.counter*this.D.R.ha.Ca};this.F.forEach(function(d){b.D.R.Vb[d.id]&&d.update(c)});this.F.sort(function(d,f){return f.Pa.z-d.Pa.z});this.D.counter++}else if(this.M.forEach(function(d){return d.update(b.A||b.O)}),this.M.sort(function(d,f){return f.$a.z-d.$a.z}),this.D.active){this.D.R.Jc(this.D.direction);if(this.D.Ab&&(this.D.Ab(),this.D.counter<(a?this.D.R.ha.J:1)))return this.update(a);this.D={active:!1,counter:0,direction:void 0,R:void 0}}};O.prototype.aa=function(a,
b){for(var c,d=this.M.length-1;0<=d&&!(0<=this.M[d].$a.z);d--)if(c=this.M[d].F.find(function(f){return f.contains({x:a,y:b,z:0})}))return c};O.prototype.Ya=function(a,b,c){this.a.x=a;this.a.y=b;2===c?this.C=!0:(this.j=this.aa(a,b),this.G=!!this.j,this.C=!this.j)};O.prototype.hb=function(a,b,c,d){c=void 0===c?!0:c;if(!this.D.active)if(this.C&&(void 0===d||d)){if(a=(a-this.a.x)/100,b=(b-this.a.y)/100,a||b)b=new G({x:b,y:-a,z:0}),this.A={axis:b,angle:b.Ta()}}else this.G&&c&&(b=new G(new v(this.a.x,this.a.y,
0),new v(a,b,0)),20<b.Ta()&&this.$(b))};O.prototype.$=function(a){if(this.T[this.j.id]){var b=0,c,d;this.T[this.j.id].forEach(function(f){var g=new v(f.I.x,f.I.y,f.I.z);g.z=0;g=new G(g);g=a.gb(g);b<g.Ta()&&(b=g.Ta(),c=f,d=0<g.z?-1:1)});this.L(c,d);this.release()}};O.prototype.L=function(a,b){this.D.active||(this.D={active:!0,counter:0,direction:b,R:a})};O.prototype.release=function(){this.G=this.C=!1;this.a={};this.A&&(this.X(this.A),this.A=void 0);this.j=void 0};O.prototype.X=function(a){this.F.forEach(function(b){return b.c.forEach(function(c){return c.X(a)})});
this.B.forEach(function(b){return b.X(a)})};O.prototype.ab=function(a){var b=this,c=a.length,d=[];a.forEach(function(f,g){d.push({active:!0,counter:0,direction:f.direction,R:f.R,Ab:g<c-1?function(){b.D=d[g+1]}:function(){}})});this.D=d[0]};O.prototype.kc=function(){return this.M[0].F.length};O.prototype.Fb=function(){return{4:4,6:3,8:4,12:12,20:12}[this.M.length]};O.prototype.ic=function(a){return this.B[a]};O.prototype.Fc=function(a,b,c){this.M[a].F[b].Wa.code=c};O.prototype.ec=function(a){a||(a=
[]);if(0<this.B.length&&0<a.length){this.ab(a);var b=this.B[0].ha.J,c=this.B[0].ha.Ca;this.B[0].ha.J=1;this.B[0].ha.dc=b*c;for(var d=0;d<=a.length;d++)this.update(!1);this.B[0].ha.J=b;this.B[0].ha.dc=c}};O.prototype.da=function(a,b,c){c=void 0===c?!0:c;if(this.D.active){var d=P(b?[this.F.length-1,-1,-1]:[0,this.F.length,1]),f=d.next().value,g=d.next().value;for(d=d.next().value;f!==g;f+=d)this.F[f].da(a,b,c)}else for(d=P(b?[this.M.length-1,-1,-1]:[0,this.M.length,1]),f=d.next().value,g=d.next().value,
d=d.next().value;f!==g;f+=d)this.M[f].da(a,b,c)};v.prototype.update=function(a){a=this.j(this.a,a.axis.ea(),a.angle);var b=a.y,c=a.z;this.x=a.x;this.y=b;this.z=c};v.prototype.X=function(a){this.update(a);this.a.x=this.x;this.a.y=this.y;this.a.z=this.z};v.prototype.clone=function(){return new v(this.x,this.y,this.z,this.id)};v.prototype.j=function(a,b,c){var d=Math.sin(c/2);b=new ha(Math.cos(c/2),d*b.x,d*b.y,d*b.z);a=new ha(0,a.x,a.y,a.z);a=b.multiply(a).multiply(b.a());return new v(a.x,a.y,a.z)};
fa.prototype.update=function(a){this.F.forEach(function(b){return b.update(a)});this.$a=this.F[0].zb()};fa.prototype.da=function(a,b,c){this.F.forEach(function(d){return d.da(a,b,c)})};da.prototype.Qa=function(){var a=this;this.K.forEach(function(b){return b.forEach(function(c){return a.Vb[c.id]=!0})})};da.prototype.X=function(a){var b=new v(this.I.x,this.I.y,this.I.z);b.update(a);this.I=new G(b)};da.prototype.Jc=function(a){var b=this;a=void 0===a?1:a;this.K.forEach(function(c){if(1!==c.length){var d=
a*c.length/b.a;c.forEach(function(f,g){f.ob=c[D.j(g-d,c.length)].Wa});c.forEach(function(f){f.Wa=f.ob;delete f.ob})}})};V.prototype.contains=function(a){for(var b=this.c[this.c.length-1],c=0,d=P(this.c),f=d.next();!f.done;f=d.next()){f=f.value;b=(new G(b,f)).gb(new G(b,a));if(0>c&&0<b.z||0<c&&0>b.z)return!1;0!==b.z&&(c=b.z);b=f}return!0};V.prototype.zb=function(){return(new G(this.c[0],this.c[1])).gb(new G(this.c[0],this.c[this.c.length-1]))};V.prototype.update=function(a){this.c.forEach(function(b){return b.update(a)});
this.Pa={x:this.c.reduce(function(b,c){return b+c.x},0),y:this.c.reduce(function(b,c){return b+c.y},0),z:this.c.reduce(function(b,c){return b+c.z},0)}};V.prototype.a=function(a,b,c){a=[a.x,a.y];c&&(a[0]+=(this.Pa.x-a[0])/(10*this.c.length),a[1]+=(this.Pa.y-a[1])/(10*this.c.length));b&&(a[0]=-a[0]);return a};V.prototype.da=function(a,b,c){var d=this;a.fillStyle=this.Wa.code;a.strokeStyle="#202020";a.beginPath();a.moveTo.apply(a,T(this.a(this.c[0],b,c)));this.c.forEach(function(f){return a.lineTo.apply(a,
T(d.a(f,b,c)))});a.closePath();a.fill();a.stroke()};var ja=["w","x","y","z"],Ga=[[1,1,1,1],[1,-1,1,-1],[1,-1,-1,1],[1,1,-1,-1]],ya=[[0,1,2,3],[1,0,3,2],[2,3,0,1],[3,2,1,0]];ha.prototype.a=function(){return new ha(this.w,-this.x,-this.y,-this.z)};ha.prototype.multiply=function(a){for(var b=new ha(0,0,0,0),c=0;4>c;c++)for(var d=0;4>d;d++)b[ja[ya[c][d]]]+=Ga[c][d]*this[ja[c]]*a[ja[d]];return b};var ia={x:0,y:0,z:0};G.prototype.add=function(a){return new G(ia,{x:this.x+a.x,y:this.y+a.y,z:this.z+a.z})};
G.prototype.multiply=function(a){return new G(ia,{x:this.x*a,y:this.y*a,z:this.z*a})};G.prototype.Ta=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};G.prototype.ea=function(){return this.multiply(1/this.Ta())};G.prototype.gb=function(a){return new G(ia,{x:this.y*a.z-this.z*a.y,y:this.z*a.x-this.x*a.z,z:this.x*a.y-this.y*a.x})};Ba(xa,O);Ba(wa,O);Ba(va,O);Ba(ua,O);Ba(ta,O);Y.prototype.kb=function(){this.a&&(this.a.style.display="none")};Y.prototype.show=function(){this.a&&(this.a.style.display=
"inline-block")};Y.prototype.disable=function(){this.a&&(this.a.disabled=!0)};Y.prototype.enable=function(){this.a&&(this.a.disabled=!1)};Ba(oa,Y);oa.prototype.Bc=function(a){this.a&&(this.a.download="image.png",this.a.href=a,this.a.click())};Ba(ca,Y);ca.prototype.Ba=function(a){this.a.addEventListener("click",a)};U.prototype.getContext=function(a){return a?a.getContext("2d"):null};U.prototype.clear=function(){this.j&&(this.j.save(),this.j.setTransform(1,0,0,1,0,0),this.j.clearRect(0,0,this.a.width,
this.a.height),this.j.restore())};U.prototype.A=function(){if(this.a){var a=this.a.getBoundingClientRect();return{x:a.left+this.G,y:a.top+this.L}}return{x:0,y:0}};U.prototype.Gb=function(a){var b=this.A();return{x:a.clientX-b.x,y:a.clientY-b.y}};U.prototype.Ib=function(a){var b=this.A();return{x:a.touches[0].clientX-b.x,y:a.touches[0].clientY-b.y}};U.prototype.Ec=function(a){this.j&&(this.scale=a,this.j.scale(a,a))};U.prototype.Tb=function(a,b){this.j&&(this.a.width=a,this.a.height=b)};U.prototype.Ub=
function(a,b){this.j&&(this.G=a,this.L=b,this.j.translate(a,b))};U.prototype.na=function(a,b){this.a&&this.a.addEventListener(a,b)};U.prototype.da=function(a,b){this.j&&a.da(this.j,this.C,b)};U.prototype.Cc=function(a,b){this.a&&(this.a.style.position="absolute",this.a.style.left=a+"px",this.a.style.top=b+"px")};U.prototype.O=function(){var a=void 0===a?"gray":a;var b=D.a(this.a.width%30/2),c=D.a(this.a.height%30/2);return{$b:"linear-gradient(45deg, "+a+" 26%, transparent 25%), linear-gradient(-45deg, "+
a+" 26%, transparent 25%), linear-gradient(45deg, transparent 75%, "+a+" 75%), linear-gradient(-45deg, transparent 75%, "+a+" 75%)",ac:b+"px "+c+"px, "+b+"px "+(15+c)+"px, "+(15+b)+"px "+-(15-c)+"px, "+-(15-b)+"px "+c+"px",bc:"30px 30px"}};U.prototype.Dc=function(a,b){this.a&&(this.a.style.backgroundColor=a,b?this.a.style.backgroundImage="":(a=this.O(),this.a.style.backgroundImage=a.$b,this.a.style.backgroundPosition=a.ac,this.a.style.backgroundSize=a.bc))};U.prototype.Zb=function(){if(this.a)return this.a.toDataURL()};
U.prototype.jc=function(){return this.j?this.j.getImageData(0,0,this.a.width,this.a.height):null};U.prototype.wc=function(a,b){this.j&&this.j.putImageData(a,b,0)};U.prototype.w=function(){return this.a?this.a.width:0};Ba(na,Y);na.prototype.show=function(){this.a&&(this.a.style.display="block")};Ba(ea,Y);ea.prototype.Gc=function(a){this.a&&(this.a.innerText=a)};K.prototype.ra=function(a){a&&(this.A=!!a.isTetra,this.G=!(!a.isOcta||this.A),this.L=!(!a.isDodeca||this.G||this.A),this.$=!(!a.isIcosa||this.L||
this.G||this.A),this.rb=!(this.$||this.L||this.G||this.A),this.rows=a.rows||3,this.o=null,this.Sa=!!a.fakeEven,this.Ua=!!a.peekThru,this.wb=!!a.scramble,this.yb=!!a.skipAnimate,this.ga=!!a.preventTwist,this.fa=!!a.preventRotate,this.lb=!!a.hideControls,this.Za=!!a.isBgSolid,this.ia=a.colors||[],this.F=a.stickers||[],this.ub=a.orient||[],this.Ea=a.premoves||[],this.alg=a.alg||[],this.bgColor=a.bgColor||"",this.qb=a.edgeColor||"",this.Bb=a.turnSpeed||20,this.tb=a.mainViewSize||200,this.Ma=a.scaleRearView||
1/3,this.ua=D.G(a.rearViewMode)?a.rearViewMode:0,this.nb=a.scaleMainPoly||this.oc());this.a.P=0;this.a.B=[];this.a.U=!1;this.a.sa=null;a=this.tb;var b=this.qc(),c=this.sb(),d=b?a:a*this.Ma,f=c?(a+2*d)/2:a/2,g=a/2;this.j.Tb(b?2*a:c?a+2*d:a,a);this.j.Ub(f,g);this.j.Dc(this.bgColor,this.Za);this.j.clear();this.C.Tb(d,d);this.C.Cc(-d,-a);this.C.Ub(d/2,d/2);this.sb()&&this.C.Ec(this.Ma);this.C.clear();this.o=this.pc(this.rows,a*this.nb,this.Bb,this.ia);this.fc();this.lb?this.Xa.kb():this.Xa.show();this.lc()};
K.prototype.oc=function(){return this.A?.51:this.G?.5:this.L?.57:this.$?.52:.58};K.prototype.sb=function(){return 2==this.ua};K.prototype.qc=function(){return 1==this.ua};K.prototype.pc=function(a,b,c,d){return this.L?new ua(a,b,c,d):this.$?new wa(a,b,c,d):this.G?new va(a,b,c,d):this.A?new ta(a,b,c,d):new xa(a,b,c,d)};K.prototype.xb=function(a){a||(a=[]);if(0<a.length){var b=this.o.Fb(),c=this.o.B.length/b,d=[];a=P(a);for(var f=a.next();!f.done;f=a.next())f=f.value,3==f.length&&d.push({R:this.o.ic((D.a(f[0])||
0)%b*c+(D.a(f[1])||0)%c),direction:1==(D.a(f[2])||1)?1:-1});this.o.ec(d)}};K.prototype.tc=function(a){a||(a=[]);if(0<a.length){var b=this.o.Fb(),c=this.o.B.length/b;a=P(a);for(var d=a.next();!d.done;d=a.next())d=d.value,3==d.length&&this.a.B.push({R:this.o.B[(D.a(d[0])||0)%b*c+(D.a(d[1])||0)%c],direction:1==(D.a(d[2])||1)?1:-1})}};K.prototype.ka=function(a){a||(a=[]);a=P(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,4==b.length){var c=D.a(b[2])||0,d=D.a(b[3])||0;this.o.Ya(D.a(b[0])||0,D.a(b[1])||
0,2);this.o.hb(c,d);this.o.release()}};K.prototype.Na=function(a){var b=this.o.M.length,c=this.o.kc();a||(a=[]);a=P(a);for(var d=a.next();!d.done;d=a.next())d=d.value,3==d.length&&this.o.Fc((D.a(d[0])||0)%b,(D.a(d[1])||0)%c,String(d[2]).trim()||"red")};K.prototype.hc=function(){if(this.L&&this.Sa){for(var a=Math.pow(this.rows,2),b=a+this.rows,c=[],d=0;d<this.o.M.length;d++)for(var f=0;f<this.rows;f++)for(var g=0;5>g;g++)c.push([d,a+f+g*b,"black"]);this.Na(c)}};K.prototype.vc=function(){this.A?this.ka([[230,
0,0,0],[0,0,0,55],[0,0,150,0],[0,0,0,30]]):this.G?this.ka([[0,15,0,0],[0,0,50,0],[0,0,0,15]]):this.$&&this.ka([[0,140,0,0]])};K.prototype.uc=function(a){if(a){var b=[],c=this.rows;if(this.A&&3<c)for(var d=P([0,1,2,3]),f=d.next();!f.done;f=d.next()){f=f.value;for(var g=0,k=-1;g<c-1;g++,k+=2){var n=g*g;b.push([f,n,a]);b.push([f,n+1,a]);0<k&&(b.push([f,n+k,a]),b.push([f,n+k+1,a]))}for(g=(c-1)*(c-1);g<c*c;g++)b.push([f,g,a])}else if(this.rb&&2<c)for(g=P([0,1,2,3,4,5]),f=g.next();!f.done;f=g.next()){f=
f.value;for(k=0;k<c;k++)b.push([f,k,a]);for(k=c;k<(c-1)*c;k+=c)b.push([f,k,a]),b.push([f,k+c-1,a]);for(k=(c-1)*c;k<c*c;k++)b.push([f,k,a])}else if(this.G&&3<c)for(d=P([0,1,2,3,4,5,6,7]),f=d.next();!f.done;f=d.next()){f=f.value;g=0;for(k=-1;g<c-1;g++,k+=2)n=g*g,b.push([f,n,a]),b.push([f,n+1,a]),0<k&&(b.push([f,n+k,a]),b.push([f,n+k+1,a]));for(g=(c-1)*(c-1);g<c*c;g++)b.push([f,g,a])}else if(this.L&&0<c)for(k=P([0,1,2,3,4,5,6,7,8,9,10,11]),f=k.next();!f.done;f=k.next())for(f=f.value,d=0;5>d;d++){n=c;
var w=n*(n+1),u=d*w;for(g=u;g<u+n;g++)b.push([f,g,a]);for(g=u+n;g<(d+1)*w;g+=n)b.push([f,g,a])}this.Na(b)}};K.prototype.lc=function(){this.uc(this.qb);this.Na(this.F);this.hc();this.vc();this.ka(this.ub);if(this.wb){for(var a=[],b=0;b<3*this.o.B.length;b++)a.push([Math.floor(Math.random()*this.o.M.length),Math.floor(Math.random()*this.o.B.length),.5>Math.random()?-1:1]);this.xb(a)}else this.xb(this.Ea);this.tc(this.alg);this.vb(!1);this.Ja();this.Cb()};K.prototype.Ja=function(){this.aa.kb();this.ba.show();
this.la.enable();this.ma.enable();this.Ka.enable();this.aa.enable();0==this.a.P&&this.ma.disable();this.a.P>=this.a.B.length&&this.la.disable();0==this.a.B.length||this.a.P>=this.a.B.length?this.ba.disable():this.ba.enable()};K.prototype.vb=function(a){this.o.update(a);this.j.clear();this.j.da(this.o,this.Ua);this.ua&&(this.C.clear(),this.C.da(this.o,this.Ua))};K.prototype.La=function(){this.a.P<this.a.B.length&&(this.o.ab([this.a.B[this.a.P]]),this.O(),this.a.P++)};K.prototype.sc=function(){if(0<
this.a.P){this.a.P--;var a=this.a.B[this.a.P];this.o.ab([{R:a.R,direction:-a.direction}]);this.O()}};K.prototype.Cb=function(){0<this.a.B.length&&this.xc.Gc(this.a.P+"/"+this.a.B.length)};K.prototype.O=function(){var a=this;this.o.D.active||this.a.U?(this.vb(!this.yb),setTimeout(function(){return a.O()},1)):(this.Cb(),"play"==this.a.sa&&this.a.P<this.a.B.length?this.La():(this.Ja(),this.a.sa=null))};K.prototype.Ia=function(a){a=void 0===a?!1:a;this.ba.kb();this.aa.show();this.la.disable();this.ma.disable();
this.Ka.disable();a&&this.aa.disable()};K.prototype.setTwistable=function(a){this.ga=!a};K.prototype.setRotatable=function(a){this.fa=!a};K.prototype.fc=function(){var a=this;this.a.Kb||(this.j.na("mousedown",function(b){b.preventDefault();b.stopPropagation();a.a.U||(a.a.U=!0,a.O());var c=a.j.Gb(b);a.o.Ya(c.x,c.y,b.ctrlKey?2:b.button)}),this.j.na("mousemove",function(b){a.a.U&&(b.preventDefault(),b.stopPropagation(),b=a.j.Gb(b),a.o.hb(b.x,b.y,!a.ga,!a.fa))}),this.j.na("mouseup",function(b){a.a.U=
!1;b.preventDefault();b.stopPropagation();a.o.release()}),this.j.na("mouseleave",function(){a.a.U=!1;a.o.release()}),this.j.na("touchstart",function(b){a.yc=0;b.preventDefault();b.stopPropagation();a.a.U||(a.a.U=!0,a.O());b=a.j.Ib(b);a.ga&&!a.fa?a.o.Ya(b.x,b.y,2):a.o.Ya(b.x,b.y,1)}),this.j.na("touchmove",function(b){a.a.U&&(b.preventDefault(),b.stopPropagation(),b=a.j.Ib(b),a.o.hb(b.x,b.y,!a.ga,!a.fa))}),this.j.na("touchend",function(b){a.a.U=!1;b.preventDefault();b.stopPropagation();a.o.release()}),
this.j.na("touchcancel",function(){a.a.U=!1;a.o.release()}),this.ba.Ba(function(){a.a.P<a.a.B.length&&!a.o.D.active&&(a.a.sa="play",a.o.ab(a.alg),a.Ia(),a.La())}),this.aa.Ba(function(){a.a.sa="pause";a.Ja()}),this.la.Ba(function(){a.a.P<a.a.B.length&&!a.o.D.active&&(a.a.sa="next",a.Ia(!0),a.La())}),this.ma.Ba(function(){0<a.a.P&&!a.o.D.active&&(a.a.sa="prev",a.Ia(!0),a.sc())}),this.Ka.Ba(function(){a.ra(null)}),this.rc.Ba(function(){if(a.pb){var b=a.j.w()-a.C.w();a.j.wc(a.C.jc(),b);a.j.da(a.o,a.Ua);
a.pb.Bc(a.j.Zb())}}),this.a.Kb=!0)};Ba(N,K);N.prototype.loadConfig=function(a){K.prototype.ra.call(this,l.a(a))};C.populatePage=function(a,b){return a?new C(a,b):null};C.prototype.L=function(){this.j.length=0;for(var a=P(this.C.getElementsByTagName(this.G)),b=a.next();!b.done;b=a.next())this.j.push(this.O(b.value))};C.prototype.getPlayers=function(){return this.j};C.prototype.create=function(a){return this.C.createElement(a)};C.prototype.ma=function(a){a=a.getAttribute("twedra-config")||"{}";return l.a(a)};
C.prototype.ra=function(a){return{alg:a.getAttribute("alg")||"",o:a.getAttribute("puzzle")||"",background:a.getAttribute("background")||"",mc:a.getAttribute("hint-facelets")||"",Xa:a.getAttribute("control-panel")||"",fb:a.getAttribute("back-view")||"",Eb:a.getAttribute("experimental-setup-alg")||""}};C.prototype.la=function(a,b){b.alg&&(a.alg=b.alg);b.o&&(a.name=b.o);b.background&&(/checkered/.test(b.background)?a.Za=!1:(a.Za=!0,a.bgColor=b.background));"floating"==b.mc&&(a.Ua=!0);"none"==b.Xa&&(a.lb=
!0);b.Eb&&(a.Ea=b.Eb);"none"==b.fb&&(a.ua=0);"side-by-side"==b.fb&&(a.ua=1);"top-right"==b.fb&&(a.ua=2);return a};C.prototype.$=function(a,b){var c=this.create("div");c.appendChild(a.Qb);c.appendChild(a.Jb);c.appendChild(a.Rb);c.appendChild(a.Pb);c.appendChild(a.Ob);c.appendChild(a.Mb);c.appendChild(b);return c};C.prototype.ga=function(){var a=this.create("div");a.style.display="inline-block";a.style.width="4em";a.style.textAlign="center";a.style.position="absolute";return a};C.prototype.A=function(){var a=
this.create("canvas");a.style.cursor="pointer";a.userSelect="none";a.WebkitUserSelect="none";a.MozUserSelect="none";a.Kc="none";return a};C.prototype.aa=function(){return this.A()};C.prototype.ba=function(){return this.A()};C.prototype.a=function(a){var b=this.create("button");b.innerText=a;return b};C.prototype.fa=function(a){var b=this.create("div");b.style.position="relative";b.style.display="inline-block";b.appendChild(a);return b};C.prototype.ka=function(){var a={Jb:this.a("Init"),Rb:this.a("Prev"),
Pb:this.a("||>"),Ob:this.a("||>"),Mb:this.a("Next"),Qb:this.a("PNG")},b=this.ga(),c=this.ba();return{Lb:this.aa(),Ac:c,nc:this.fa(c),Nb:this.$(a,b),cc:a,Ic:b,Yb:this.create("a")}};C.prototype.O=function(a){a.innerHTML="";var b=this.create("div");b.classList.add("polyframe");a.appendChild(b);try{var c=this.ra(a),d=this.ma(a),f=this.la(d,c),g=this.ka();b.appendChild(g.Lb);b.appendChild(g.nc);b.appendChild(g.Nb);var k=g.cc;return new N(f,g.Lb,g.Ac,g.Nb,k.Jb,k.Pb,k.Mb,k.Rb,k.Ob,k.Qb,g.Ic,g.Yb)}catch(n){return console.log(n),
b.innerText=n.message,null}};t.prototype.jb=function(){this.a++;if(1E3<this.a)throw Error("bad loop1");return this.oa<this.j.length};t.prototype.Hb=function(){this.a++;if(1E3<this.a)throw Error("bad loop2");if(this.oa<this.j.length){var a=this.j[this.oa];this.oa++;return a}return null};t.prototype.zc=function(){for(var a="";this.jb()&&this.A();)a+=this.Hb();return a};t.prototype.A=function(){return this.jb()?/\d/.test(this.j[this.oa]):!1};l.a=function(a){a=l.$(a);var b=l.ga(a),c=b.Sb;a.isTetra="t"==
c;a.isCube="c"==c;a.isOcta="o"==c;a.isDodeca="d"==c;a.isIcosa="i"==c;a.rows=b.rows;a.fakeEven=b.Sa;b=l.fa(a.isTetra,a.isOcta,a.isDodeca,a.isIcosa);a.orient=l.Ja(a.orient);c={alg:l.G(a.alg,b.ta),ia:l.ra(a.colors,b.Ra),Ea:l.G(a.premoves,b.ta),F:l.Ka(a.stickers,b.ta)};return l.Na(a,c,b)};l.Na=function(a,b,c){if(b.ia){for(var d=T(b.ia).concat(),f=0;f<b.ia.length;f++){var g=c.Da[f];g<b.ia.length&&(d[f]=b.ia[g])}a.colors=d}b.F&&(a.stickers=b.F.map(function(k){return[c.Da[k[0]],k[1],k[2]]}));b.Ea&&(a.premoves=
b.Ea.map(function(k){var n=k[0],w=k[2];return[c.T[n],c.za(n,k[1],a.rows),c.Aa(n,w)]}));b.alg&&(a.alg=b.alg.map(function(k){var n=k[0],w=k[2];return[c.T[n],c.za(n,k[1],a.rows),c.Aa(n,w)]}));return a};l.fa=function(a,b,c,d){return l.ba(a,b,c,d)};l.ba=function(a,b,c,d){return a?{Ra:4,ta:{d:2,f:0,l:3,r:1},Da:{0:2,1:1,2:0,3:3},T:{0:1,1:2,2:3,3:0},za:function(f,g,k){return k-g%k-1},Aa:function(f,g){return g}}:b?{Ra:8,ta:{f:3,u:0,i:1,r:2,l:4,e:5,b:6,d:7},Da:{0:2,1:1,2:0,3:3,4:5,5:6,6:7,7:4},T:{0:2,1:1,2:0,
3:3,4:1,5:0,6:3,7:2},za:function(f,g,k){return 3<f?k-g%k-1:g},Aa:function(f,g){return 3<f?g:-g}}:c?{Ra:12,ta:{f:0,u:1,r:2,l:5,b:11,h:3,e:6,i:7,g:8,p:10,t:4,d:9},Da:{0:5,1:7,2:9,3:0,4:2,5:11,6:3,7:1,8:8,9:4,10:10,11:6},T:{0:5,1:7,2:9,3:0,4:2,5:11,6:3,7:1,8:8,9:4,10:10,11:6},za:function(f,g){return g},Aa:function(f,g){return-g}}:d?{Ra:20,ta:{f:0,u:1,r:2,l:5,b:11,h:3,e:6,i:7,g:8,p:10,t:4,d:9},Da:{0:15,1:3,2:4,3:16,4:14,5:6,6:5,7:13,8:19,9:2,10:1,11:0,12:17,13:10,14:7,15:8,16:9,17:12,18:18,19:11},T:{0:9,
1:0,2:8,3:2,4:7,5:6,6:1,7:4,8:5,9:3,10:11,11:10},za:function(f,g){return g},Aa:function(f,g){return-g}}:{Ra:6,ta:{l:4,r:2,u:1,d:3,f:0,b:5},Da:{0:4,1:2,2:1,3:3,4:0,5:5},T:{0:0,1:1,2:2,3:1,4:2,5:0},za:function(f,g,k){return[2,3,5].includes(f)?k-g%k-1:g},Aa:function(f,g){return[1,4,5].includes(f)?-g:g}}};l.$=function(a){return D.A(a)?(a=D.C(D.L(a)).trim(),l.L(a)):a?a:{}};l.O=function(a,b){if(a){var c=a.substring(0,1);a=D.a(a.substring(1));var d=0==a%2;"d"==c&&(a=Math.floor(a/2));b.Sb=c;b.rows=a;b.Sa=
"d"==c&&d}return b};l.La=function(a){a=a.toLowerCase().replace(/[^a-z0-9]/g,"");switch(a){case "minipyraminx":return"t2";case "pyraminx":return"t3";case "mastertetraminx":case "masterpyraminx":return"t4";case "professorpyraminx":return"t5";case "royalpyraminx":return"t6";case "pocketcube":return"c2";case "cube":return"c3";case "rubiksrevenge":return"c4";case "professorscube":return"c5";case "octo2":return"o2";case "fto":case "octo3":return"o3";case "octo4":return"o4";case "octo5":return"o5";case "octo6":return"o6";
case "octo7":return"o7";case "kilominx":return"d2";case "megaminx":return"d3";case "masterkilominx":return"d4";case "gigaminx":return"d5";case "elitekilominx":return"d6";case "teraminx":return"d7";case "kilominx8":return"d8";case "petaminx":return"d9";case "kilominx10":return"d10";case "examinx":return"d11";case "icosa2":return"i2";case "icosa3":return"i3";case "icosa4":return"i4";case "icosa5":return"i5";case "icosa6":return"i6";case "icosa7":return"i7";case "icosa8":return"i8";default:var b=a.split("x");
if(3==b.length&&b[0]==b[1]&&b[1]==b[2]&&(b=D.a(b[0]),0<b))return"c"+b}return a.match(/^[cdiot]\d+$/)?(b=a.substring(0,1),a=a.substring(1),a=Math.max(1,D.a(a)),"d"==b&&2>a&&a++,b+a):"c3"};l.ga=function(a){var b={Sb:a.ptype||"c",rows:D.a(a.rows)||3,Sa:!!a.fakeEven};return a.name?l.O(l.La(a.name),b):b};l.j=function(a){return a.trim().split(/[;]+/).map(function(b){return b.trim()})};l.C=function(a,b){var c=D.a(b);if(Number.isInteger(c))return c;b=(b||"").toLowerCase();a=a[b];D.G(a)||(console.log(b+" not found in facemap. Setting to 0."),
a=0);return a};l.ra=function(a,b){if(D.A(a)){var c=[];a=a.trim();if(a.length){a=a.split(/[; ,]+/);var d=a[a.length-1];c.length=b;c.fill(d);for(b=0;b<a.length&&b<c.length;b++)c[b]=a[b]}return c}return a};l.Ka=function(a,b){if(D.A(a)){var c=[];a=l.j(a).map(function(u){return u.trim().split(/,/).map(function(M){return M.trim()})});a=P(a);for(var d=a.next();!d.done;d=a.next()){var f=d.value;d=f.shift();f=P(f);for(var g=f.next();!g.done;g=f.next()){var k=g.value.split(/\s+/);g=k.shift();k=P(k);for(var n=
k.next();!n.done;n=k.next()){n=n.value;var w=l.C(b,g);c.push([w,D.a(n),d])}}}return c}return a};l.Ja=function(a){if(D.A(a)){var b=[];a=l.j(a).map(function(f){return f.split(/\s+/).map(function(g){return g.trim().toLowerCase()})}).filter(function(f){return 2==f.length});a=P(a);for(var c=a.next();!c.done;c=a.next()){var d=c.value;c=d[0];if(d=D.a(d[1]))switch(c){case "l":b.push([d,0,0,0]);break;case "u":b.push([0,d,0,0]);break;case "r":b.push([0,0,d,0]);break;case "d":b.push([0,0,0,d])}}return b}return a};
l.ka=function(a){return Object.is(a,-0)||0>a};l.G=function(a,b){return D.A(a)?/[a-zA-Z]/.test(a)?l.ma(a,b):l.Ia(a):a};l.ma=function(a,b){var c=(new m).A(a).split(/\s+/);a=[];c=P(c);for(var d=c.next();!d.done;d=c.next()){var f=d.value,g=1,k=!1,n=1;d=1;var w=f;w.endsWith("'")&&(d=-1,w=w.substring(0,w.length-1));if(w.endsWith("w")||w.endsWith("W"))k=!0,w=w.substring(0,w.length-1);var u=w.match(/\d+$/);u&&(n=u[0],w=w.substr(0,w.length-n.length),n=D.a(n));if(u=w.match(/^\d+/))g=u[0],w=w.substr(g.length),
g=D.a(g);if(1!=w.length||l.la(w))console.log("could not parse "+f);else for(f=w,w=k?0:g-1,k&&1==g&&(g=2),k=w;k<g;k++)for(w=0;w<n;w++)u=l.C(b,f),a.push([u,k,d])}return a};l.la=function(a){return"x"==a||"y"==a||"z"==a};l.Ia=function(a){if(D.A(a)){var b=l.j(a).map(function(g){return g.split(/\s+/).map(function(k){return D.a(k)})});a=[];b=P(b);for(var c=b.next();!c.done;c=b.next())if(c=c.value,2==c.length&&(l.ka(c[1])?(c[1]=Math.abs(c[1]),c.push(-1)):c.push(1)),3==c.length){var d=Math.abs(c[2]);c[2]=
1>c[2]?-1:1;for(var f=0;f<d;f++)a.push(c)}return a}return a};l.L=function(a){a=(a||"").trim();a.startsWith("{")||(a="{"+a+"}");try{return JSON.parse(a)}catch(b){}return JSON.parse(l.Ma(l.aa(D.C(a))))};l.A=function(a){for(var b=!1,c=[],d=0;d<a.length;d++){var f=a[d];b?("'"!=f&&c.push("\\"),c.push(f),b=!1):"\\"==f?b=!0:('"'==f&&c.push("\\"),c.push(f))}return c};l.aa=function(a){for(var b=!1,c=!1,d=!1,f=!1,g=!1,k=[],n=[],w=0;w<a.length;w++){var u=a[w];g?(c||b?(k.push("\\"),k.push(u)):f?(n.push('"'),
n.push.apply(n,T(k)),n.push('"'),f=!1,k.length=0):d?(n.push('"'),n.push.apply(n,T(l.A(k))),n.push('"'),d=!1,k.length=0):'"'==u?(n.push.apply(n,T(k)),k.length=0,f=!0):"'"==u?(n.push.apply(n,T(k)),k.length=0,d=!0):(k.push("\\"),k.push(u)),g=!1):"\\"==u?g=!0:d?k.push(u):f?k.push(u):c?"'"==u?(n.push('"'),n.push.apply(n,T(l.A(k))),n.push('"'),k.length=0,c=!1):k.push(u):b?'"'==u?(n.push('"'+k.join("")+'"'),k.length=0,b=!1):k.push(u):'"'==u?(k.length&&n.push.apply(n,T(k)),k.length=0,b=!0):"'"==u?(k.length&&
n.push.apply(n,T(k)),k.length=0,c=!0):k.push(u)}k.length&&n.push.apply(n,T(k));if(b||c||g)throw Error("Quote not closed: "+k.join(""));return n.join("")};l.Ma=function(a){return a.replace(/(['"])?([a-zA-Z0-9_\$]+)(['"])?\s*:/g,'"$2":')};m.prototype.O=function(a){return this.G(this.C(a.trim()))};m.prototype.A=function(a){a=new t(this.O(a).trim());return this.a(a)};m.prototype.a=function(a,b){b=void 0===b?null:b;for(var c="",d="";a.jb();){var f=a.Hb();if(f==b)return c+d;if(" "==f)c+=d+" ",d="";else if("("==
f){f=this.a(a,")");for(var g=D.a(a.zc()||"1"),k=[],n=0;n<g;n++)k.push(f);c+=k.join(" ")}else"["==f?(f=this.a(a,",").trim(),g=this.a(a,"]").trim(),c+=[f,g,this.j(f),this.j(g)].join(" ")):d+=f}d&&(c+=d);return c};m.prototype.j=function(a){return a.trim().split(/\s+/).reverse().map(this.L).join(" ")};m.prototype.L=function(a){return 1<a.length&&a.endsWith("'")?a.substring(0,a.length-1):a+"'"};m.prototype.C=function(a){return a.replace(/\/\/.*/g,"")};m.prototype.G=function(a){return a.replace(/\n/g," ")};
return{PolyPlayer:N,PolyPlayers:C}}();
window.addEventListener('load', () => {
  var p = twedra.PolyPlayers.populatePage(document)
  if (p) twedra.players = p.getPlayers()
})
</script>

  <style>
    html {
      overflow-x: hidden;
      padding: 0;
      margin: 0;
      height: 100%;
    }

    body {
      padding: 0;
      margin: 0;
      background-color: black;
      color: white;
      text-align: center;
      overflow-x: hidden;
      position: relative;
      height: 100%;
    }

    .toggles {
      width: 10em;
      height: 5em;
    }
  </style>
  <script type="text/javascript">
    function parseBool(str) {
      let s = (str || '').toLowerCase();
      if (s == "true") return true;
      if (s == "yes") return true;
      if (s == "y") return true;
      if (s == "t") return true;
      return false;
    }

    function reloadPlayer() {
      const cfg = {
        rearViewMode: 0,
        bgColor: "",
        isBgSolid: true,
        hideControls: true,
        mainViewSize: (window.innerWidth < window.innerHeight ? window.innerWidth : 0.8 * window.innerHeight),
        turnSpeed: parseInt(turnSpeed.value),
        scramble: parseBool(scramble.value),
        scaleMainPoly: parseFloat(scaleMainPoly.value),
        name: commonName.value,
      };
      player.loadConfig(cfg);
      rotMode = true; // Set rotMode, but leave swipeMode untouched.
      updateUi();
    }

    function addOnChangeHandlers() {
      const sels = document.getElementsByTagName('select');
      for (const sel of sels) {
        sel.onchange = () => reloadPlayer();
      }

      twister.onclick = twistOnly;
      rotater.onclick = rotateOnly;
      swiper.onclick = toggleSwipeMode;
    }

    function updateUi() {
      const b1 = rotMode || swipeMode;
      const b2 = !rotMode || swipeMode;
      player.setRotatable(b1);
      player.setTwistable(b2);
      rotater.style.visibility = (b1 ? 'hidden' : 'visible');
      twister.style.visibility = (b2 ? 'hidden' : 'visible');
    }

    function rotateOnly() {
      rotMode = !rotMode;
      updateUi();
    }

    function twistOnly() {
      rotMode = !rotMode;
      updateUi();
    }

    function toggleSwipeMode() {
      swipeMode = !swipeMode;
      updateUi();
    }

    function init() {
      addOnChangeHandlers();
      player = twedra.players[0];
      reloadPlayer();
    }

    let player = null;
    let rotMode = false;
    let swipeMode = true;
    window.onload = () => init();
  </script>
</head>
<body>
  <select id='commonName'>
    <option value='t2'>
      Mini Pyraminx
    </option>
    <option value='t3'>
      Pyraminx
    </option>
    <option value='t4'>
      Master Pyraminx
    </option>
    <option value='t5'>
      Professor Pyraminx
    </option>
    <option value='t6'>
      Royal Pyraminx
    </option>
    <option value='t7'>
      Pyraminx 7
    </option>
    <option value='t8'>
      Pyraminx 8
    </option>
    <option value='t9'>
      Pyraminx 9
    </option>
    <option value='c2'>
      Pocket Cube
    </option>
    <option value='c3' selected>
      Cube
    </option>
    <option value='c4'>
      Rubik's Revenge
    </option>
    <option value='c5'>
      Professor's Cube
    </option>
    <option value='c6'>
      6x6x6
    </option>
    <option value='c7'>
      7x7x7
    </option>
    <option value='c8'>
      8x8x8
    </option>
    <option value='c9'>
      9x9x9
    </option>
    <option value='o2'>
      Octo 2
    </option>
    <option value='o3'>
      Octo 3 (FTO)
    </option>
    <option value='o4'>
      Octo 4
    </option>
    <option value='o5'>
      Octo 5
    </option>
    <option value='o6'>
      Octo 6
    </option>
    <option value='o7'>
      Octo 7
    </option>
    <option value='o8'>
      Octo 8
    </option>
    <option value='o9'>
      Octo 9
    </option>
    <option value='d2'>
      Kilominx
    </option>
    <option value='d3'>
      Megaminx
    </option>
    <option value='d4'>
      Master Kilominx
    </option>
    <option value='d5'>
      Gigaminx
    </option>
    <option value='d6'>
      Elite Kilominx
    </option>
    <option value='d7'>
      Teraminx
    </option>
    <option value='d8'>
      Kilominx 8
    </option>
    <option value='d9'>
      Petaminx
    </option>
    <option value='d10'>
      Kilominx 10
    </option>
    <option value='d11'>
      Examinx
    </option>
    <option value='i2'>
      Icosa 2
    </option>
    <option value='i3'>
      Icosa 3
    </option>
    <option value='i4'>
      Icosa 4
    </option>
    <option value='i5'>
      Icosa 5
    </option>
    <option value='i6'>
      Icosa 6
    </option>
    <option value='i7'>
      Icosa 7
    </option>
    <option value='i8'>
      Icosa 8
    </option>
  </select> <select id='scramble'>
    <option value='f' selected>
      Solved
    </option>
    <option value='t'>
      Scramble
    </option>
  </select><br>
  <select id='turnSpeed'>
    <option value='0'>
      Speed 0
    </option>
    <option value='1'>
      Speed 1
    </option>
    <option value='2'>
      Speed 2
    </option>
    <option value='3'>
      Speed 3
    </option>
    <option value='5'>
      Speed 5
    </option>
    <option value='10'>
      Speed 10
    </option>
    <option value='15' selected>
      Speed 15
    </option>
    <option value='20'>
      Speed 20
    </option>
    <option value='30'>
      Speed 30
    </option>
    <option value='40'>
      Speed 40
    </option>
  </select> <select id='scaleMainPoly'>
    <option value='0' selected>
      Zoom Off
    </option>
    <option value='0.40'>
      Zoom 40
    </option>
    <option value='0.42'>
      Zoom 42
    </option>
    <option value='0.44'>
      Zoom 44
    </option>
    <option value='0.46'>
      Zoom 46
    </option>
    <option value='0.48'>
      Zoom 48
    </option>
    <option value='0.50'>
      Zoom 50
    </option>
    <option value='0.52'>
      Zoom 52
    </option>
    <option value='0.54'>
      Zoom 54
    </option>
    <option value='0.56'>
      Zoom 56
    </option>
    <option value='0.58'>
      Zoom 58
    </option>
    <option value='0.60'>
      Zoom 60
    </option>
    <option value='0.62'>
      Zoom 62
    </option>
    <option value='0.64'>
      Zoom 64
    </option>
    <option value='0.66'>
      Zoom 66
    </option>
    <option value='0.68'>
      Zoom 68
    </option>
    <option value='0.70'>
      Zoom 70
    </option>
  </select> <button id='swiper'>Switch Modes</button> <twedra-player></twedra-player>
  <div>
    <button id='twister' class='toggles'>Twist</button> <button id='rotater' class=
    'toggles'>Rotate</button>
  </div>
</body>
</html>
